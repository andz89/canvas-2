<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Fabric 6 Example</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- <div class="bg-teal-200 align-text">
      <h2 class="m-auto">Title here</h2>
    </div> -->

    <div class="mt-3">
      <div class="w-[638px] mx-auto text-center flex gap-2">
        <div class="flex justify-start gap-2 w-full">
          <div>
            <input type="file" id="upload" class="hidden" />
            <label
              for="upload"
              class="inline-block bg-blue-500 text-white px-2 py-1 rounded cursor-pointer hover:bg-blue-600 transition"
            >
              Upload Student Image
            </label>
          </div>

          <button
            id="download"
            class="bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"
          >
            Download
          </button>
        </div>
        <div class="flex justify-end w-full">
          <label
            for="excel-file"
            class="inline-block bg-green-600 text-white px-2 py-1 rounded cursor-pointer hover:bg-green-700 transition"
          >
            Upload Excel Data
          </label>
          <input
            type="file"
            id="excel-file"
            accept=".xlsx, .xls"
            class="hidden"
          />
        </div>
      </div>

      <div
        style="
          width: 100%;
          margin-top: 10px;
          display: flex;
          justify-content: center;

          height: 400px;
        "
      >
        <canvas
          id="canvas"
          width="638"
          height="506"
          style="border: 1px solid"
        ></canvas>
      </div>

      <div
        class="w-[638px] mx-auto flex items-center justify-start gap-2 mt-30 text-sm"
      >
        <div class="flex items-center justify-left gap-1">
          <!-- Minus Button -->
          <button
            id="decrease-font"
            class="bg-slate-500 text-white w-6 h-6 flex items-center justify-center rounded hover:bg-slate-600 transition cursor-pointer"
            title="Decrease font size"
          >
            −
          </button>

          <!-- Slider -->
          <input
            type="range"
            id="font-size-slider"
            min="9"
            max="48"
            step="1"
            value="24"
            class="w-[160px] h-2 accent-blue-500 align-middle cursor-pointer"
          />

          <!-- Plus Button -->
          <button
            id="increase-font"
            class="bg-slate-500 text-white w-6 h-6 flex items-center justify-center rounded hover:bg-slate-600 transition cursor-pointer"
            title="Increase font size"
          >
            +
          </button>

          <!-- Display -->
          <span
            id="font-size-display"
            class="text-white bg-slate-700 px-2 py-0.5 rounded w-[42px] text-center cursor-pointer"
            >24px</span
          >
        </div>

        <div class="flex items-center gap-1 my-2">
          <!-- Bold -->
          <button
            id="toggle-bold"
            class="bg-slate-500 text-white px-2 py-1 rounded hover:bg-slate-600 transition font-bold cursor-pointer"
          >
            B
          </button>

          <!-- Italic -->
          <button
            id="toggle-italic"
            class="bg-slate-500 text-white px-2 py-1 rounded hover:bg-slate-600 transition italic cursor-pointer"
          >
            Italic
          </button>
        </div>
        <div>
          <input
            type="color"
            id="text-color-picker"
            value="#2b7fff"
            title="Text color"
            class="w-8 h-8 rounded cursor-pointer cursor-pointer"
          />
        </div>
        <div style="width: 100%" class="flex gap-2 flex justify-end">
          <button
            id="prev-record"
            class="bg-slate-500 text-white px-2 py-1 rounded hover:bg-slate-600"
          >
            Previous
          </button>
          <button
            id="next-record"
            class="bg-slate-500 text-white px-2 py-1 rounded hover:bg-slate-600"
          >
            Next
          </button>
        </div>
      </div>
      <div class="w-[638px] flex justify-center mx-auto my-20">
        <div
          class="bg-white shadow-sm rounded-md p-6 space-y-4 w-full max-w-md"
        >
          <div class="flex justify-between items-center gap-4">
            <!-- Custom file input -->
            <label
              for="a4upload"
              class="cursor-pointer bg-blue-600 mx-auto text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"
            >
              Upload and Export to PDF
            </label>
            <input
              type="file"
              id="a4upload"
              multiple
              accept="image/*"
              class="hidden"
            />
          </div>
          <div class="text-sm text-gray-500">
            Note: Upload the ID images you’ve created or downloaded to
            automatically arrange them, 4 per A4 landscape page. The layout
            adjusts image orientation for best fit. Once uploaded, click “Export
            to PDF” to download your file as PDF.
          </div>
        </div>
      </div>

      <!-- ✅ Modal -->
      <div
        id="pdfReadyModal"
        class="fixed inset-0 bg-slate-100/70 flex items-center hidden justify-center z-50"
      >
        <div
          class="bg-white rounded-xl shadow-xl max-w-md w-full p-6 text-center space-y-4 message"
        >
          <h2 class="text-xl font-semibold text-gray-800">
            Ready to export images to PDF.
          </h2>
          <p id="files-upload-pdf"></p>

          <!-- Export button -->
          <button
            id="a4export"
            class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition"
          >
            Export to PDF
          </button>
        </div>
      </div>

      <!-- waiting -->
      <div
        id="waiting-modal"
        class="fixed inset-0 bg-slate-100/70 flex items-center hidden justify-center z-50"
      >
        <div
          class="bg-white rounded-xl shadow-xl max-w-md w-full p-6 text-center space-y-4 message"
        >
          <h2 class="text-xl font-semibold text-blue-600">Exporting...</h2>
          <p class="text-gray-600">
            The images are exporting to PDF. Please wait.
          </p>
          <!-- Optional: loading spinner or disabled button -->
          <button
            disabled
            class="bg-blue-400 text-white px-4 py-2 rounded-lg cursor-not-allowed opacity-70"
          >
            Processing...
          </button>
        </div>
      </div>
      <!-- successful modal -->
      <div
        id="successful-modal"
        class="fixed inset-0 bg-slate-100/70 flex items-center hidden justify-center z-50"
      >
        <div
          class="bg-white rounded-xl shadow-xl max-w-md w-full p-6 text-center space-y-4"
        >
          <h2 class="text-xl font-semibold text-green-700">Success</h2>
          <p class="text-gray-600">Your PDF has been exported successfully!</p>
          <!-- OK button -->
          <button
            id="closeModalBtn"
            class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition"
          >
            OK
          </button>
        </div>
      </div>

      <!-- <img src="/images/inspection.png" alt="" width="138" /> -->

      <img
        src="/images/id-template.png"
        id="id-template"
        style="display: none"
        alt=""
      />
    </div>
    <img id="img-preload" style="display: none" />
    <img id="preview" style="display: none" />
    <!-- ✅ Must use type="module" for ES module imports -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script type="module" src="yzw.min.js"></script>
  </body>
</html>
